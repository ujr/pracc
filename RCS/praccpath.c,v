head	1.1;
access;
symbols;
locks
	ujr:1.1; strict;
comment	@ * @;


1.1
date	2006.10.14.11.57.05;	author ujr;	state Exp;
branches;
next	;


desc
@A pracc utility function that returns the full path
to a pracc file given the name of the account.
@


1.1
log
@Initial revision
@
text
@/* praccpath.c - part of pracc sources */
/* Copyright (c) 2006 by Urs-Jakob Rueetschi */

#include <stdlib.h>  /* for calloc */
#include <string.h>  /* for strcpy and strlen */

#include "pracc.h"

char *praccpath(const char *acctname)
{ /* return absolute path to pracc file or NULL */
  int n = strlen(PRACCDIR);
  int m = strlen(acctname);

  char *path = (char *) calloc(n+1+m+1, sizeof(char));
  if (path == (char *) 0) return (char *) 0; // ENOMEM

  strcpy(path, PRACCDIR);
  if (path[n-1] != '/') path[n++] = '/';
  strcpy(path+n, acctname);

  return path;
}

/* Note:
 * This is the place to make changes if I or anybody else
 * ever decides that not all pracc files should not be kept
 * in the same directory, e.g., /var/pracc/a/asmith, etc.
 */
@
